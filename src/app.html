<import from="./resources/monaco-editor"></import>
<import from="./resources/value-converters/to-object"></import>

<div
  class="d-flex h-100"
  style="min-width: 0;">
  <div
    class="d-flex flex-column col-3">
    <form
      class="form"
      submit.trigger="onAddTemplate(newTemplateName, templates.length === 0)">
      <header>Add a new template</header>
      <div
        class="input-group input-group-sm">
        <input
          class="form-control"
          value.bind="newTemplateName"
          required />
        <div class="input-group-append">
          <button
            type="submit"
            class="btn btn-outline-secondary"
            disabled.bind="!newTemplateName">Add</button>
        </div>
      </div>
    </form>
    <ul class="list-group d-block overflow-auto">
      <li if.bind="templates.length === 0">No templates</li>
      <li else>Existing templates:</li>
      <li
        repeat.for="template of templates"
        class="list-group-item"
        active.class="selectedTemplate === template"
        click.trigger="selectedTemplate = template">${template.name}</li>
    </ul>
  </div>
  <div class="col d-flex flex-column">
    <!-- start editor row -->
    <section
      class="h-50 row">
      <div
        class="col-6 d-flex flex-column">
        <h2>Template editor</h2>
        <div
          class="flex-fill p-2 border border-primary">
          <monaco-editor
            language="html"
            value.bind="selectedTemplate.value"></monaco-editor>
        </div>
      </div>
      <div class="col-6 d-flex flex-column">
        <h2>View Model editor</h2>
        <div
          class="flex-fill p-2 border border-default">
          <monaco-editor
            language="html"
            value.bind="viewModelObject | toObject"></monaco-editor>
        </div>
      </div>
    </section>
    <!-- end editor row -->
    <!-- start result viewer row -->
    <section
      class="h-50">
      <header>
        <button
          type="button"
          class="btn btn-sm btn-primary"
          click.trigger="generateTemplate()">Generate</button>
      </header>
      <textarea
        class="d-block h-100 w-100 border border-primary p-2 m-t-2"
        value.bind="generatedTemplate"
        readonly></textarea>
    </section>
    <!-- end result viewer row -->
  </div>
</div>
